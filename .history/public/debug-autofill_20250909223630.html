<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸€é”®å¡«å…¥åŠŸèƒ½è°ƒè¯•é¡µé¢</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .debug-container {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .debug-title {
        color: #2c5aa0;
        margin-bottom: 15px;
        border-bottom: 2px solid #2c5aa0;
        padding-bottom: 5px;
      }
      .debug-item {
        margin: 10px 0;
        padding: 10px;
        background: #f8f9fa;
        border-left: 4px solid #2c5aa0;
      }
      .success {
        border-left-color: #28a745;
        background: #d4edda;
      }
      .error {
        border-left-color: #dc3545;
        background: #f8d7da;
      }
      .warning {
        border-left-color: #ffc107;
        background: #fff3cd;
      }
      .btn {
        background: #2c5aa0;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      .btn:hover {
        background: #1e3d6f;
      }
      pre {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
        font-size: 12px;
      }
      .log-container {
        max-height: 300px;
        overflow-y: auto;
        background: #000;
        color: #0f0;
        padding: 10px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ”§ ä¸€é”®å¡«å…¥åŠŸèƒ½è°ƒè¯•é¡µé¢</h1>

    <div class="debug-container">
      <h2 class="debug-title">ç¯å¢ƒæ£€æµ‹</h2>
      <div id="environment-check"></div>
      <button class="btn" onclick="checkEnvironment()">é‡æ–°æ£€æµ‹ç¯å¢ƒ</button>
    </div>

    <div class="debug-container">
      <h2 class="debug-title">é¡µé¢å­—æ®µæ£€æµ‹</h2>
      <div id="field-check"></div>
      <button class="btn" onclick="checkFields()">æ£€æµ‹é¡µé¢å­—æ®µ</button>
    </div>

    <div class="debug-container">
      <h2 class="debug-title">æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•</h2>
      <div id="data-test"></div>
      <button class="btn" onclick="testWithMockData()">ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•</button>
      <button class="btn" onclick="clearAllFields()">æ¸…ç©ºæ‰€æœ‰å­—æ®µ</button>
    </div>

    <div class="debug-container">
      <h2 class="debug-title">æ¶ˆæ¯é€šä¿¡æµ‹è¯•</h2>
      <div id="message-test"></div>
      <button class="btn" onclick="testMessageCommunication()">
        æµ‹è¯•æ¶ˆæ¯é€šä¿¡
      </button>
    </div>

    <div class="debug-container">
      <h2 class="debug-title">æ‰©å±•ä¸€é”®å¡«å…¥æµ‹è¯•</h2>
      <div id="extension-test"></div>
      <button class="btn" onclick="testExtensionAutofill()">
        æµ‹è¯•æ‰©å±•ä¸€é”®å¡«å…¥
      </button>
      <p style="color: #666; font-size: 12px; margin-top: 10px">
        æ³¨æ„ï¼šæ­¤åŠŸèƒ½éœ€è¦å®‰è£…å¹¶å¯ç”¨Chromeæ‰©å±•
      </p>
    </div>

    <div class="debug-container">
      <h2 class="debug-title">å®æ—¶æ—¥å¿—</h2>
      <div id="log-container" class="log-container"></div>
      <button class="btn" onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
    </div>

    <script>
      // æ—¥å¿—ç³»ç»Ÿ
      function log(message, type = "info") {
        const timestamp = new Date().toLocaleTimeString();
        const logContainer = document.getElementById("log-container");
        const colors = {
          info: "#0f0",
          error: "#f00",
          warning: "#ff0",
          success: "#0f0",
        };

        const logEntry = document.createElement("div");
        logEntry.style.color = colors[type] || "#0f0";
        logEntry.textContent = `[${timestamp}] ${message}`;
        logContainer.appendChild(logEntry);
        logContainer.scrollTop = logContainer.scrollHeight;
      }

      function clearLogs() {
        document.getElementById("log-container").innerHTML = "";
      }

      // ç¯å¢ƒæ£€æµ‹
      function checkEnvironment() {
        const container = document.getElementById("environment-check");
        container.innerHTML = "";

        const checks = [
          {
            name: "Chromeå¯¹è±¡",
            test: () => typeof chrome !== "undefined",
            result: typeof chrome !== "undefined",
          },
          {
            name: "Chrome.tabs API",
            test: () => typeof chrome !== "undefined" && chrome.tabs,
            result: typeof chrome !== "undefined" && chrome.tabs,
          },
          {
            name: "Chrome.runtime API",
            test: () => typeof chrome !== "undefined" && chrome.runtime,
            result: typeof chrome !== "undefined" && chrome.runtime,
          },
          {
            name: "å½“å‰URL",
            test: () => window.location.href,
            result: window.location.href,
          },
          {
            name: "é¡µé¢æ ‡é¢˜",
            test: () => document.title,
            result: document.title,
          },
        ];

        checks.forEach((check) => {
          const div = document.createElement("div");
          div.className = `debug-item ${check.result ? "success" : "error"}`;
          div.innerHTML = `<strong>${check.name}:</strong> ${
            check.result || "âŒ æœªæ£€æµ‹åˆ°"
          }`;
          container.appendChild(div);

          log(
            `ç¯å¢ƒæ£€æµ‹ - ${check.name}: ${check.result || "å¤±è´¥"}`,
            check.result ? "success" : "error"
          );
        });
      }

      // å­—æ®µæ£€æµ‹
      function checkFields() {
        const container = document.getElementById("field-check");
        container.innerHTML = "";

        // æ¨¡æ‹Ÿcontent.jsä¸­çš„å­—æ®µæ˜ å°„
        const fieldMappings = {
          name: 'input[name="firstName"], input[id="firstName"], input[name="name"], input[id="name"], input[placeholder*="å§“å"]',
          phone:
            'input[name="phone"], input[id="phone"], input[type="tel"], input[placeholder*="æ‰‹æœº"]',
          email:
            'input[name="email"], input[id="email"], input[type="email"], input[placeholder*="é‚®ç®±"]',
          experience: 'select[name="experience"], select[id="experience"]',
          education: 'select[name="education"], select[id="education"]',
          salary: 'select[name="salary"], select[id="salary"]',
          resume:
            'textarea[name="introduction"], textarea[id="introduction"], textarea[name="resume"], textarea[id="resume"], textarea[placeholder*="ç®€å†"], textarea[placeholder*="ä¸ªäººç®€ä»‹"]',
        };

        let foundFields = 0;
        let totalFields = Object.keys(fieldMappings).length;

        Object.entries(fieldMappings).forEach(([fieldType, selector]) => {
          const element = document.querySelector(selector);
          const div = document.createElement("div");
          div.className = `debug-item ${element ? "success" : "error"}`;

          if (element) {
            foundFields++;
            div.innerHTML = `<strong>${fieldType}:</strong> âœ… æ‰¾åˆ°å…ƒç´  - ${element.tagName.toLowerCase()}${
              element.id ? "#" + element.id : ""
            }${element.name ? '[name="' + element.name + '"]' : ""}`;
            log(`å­—æ®µæ£€æµ‹ - ${fieldType}: æ‰¾åˆ°`, "success");
          } else {
            div.innerHTML = `<strong>${fieldType}:</strong> âŒ æœªæ‰¾åˆ° - é€‰æ‹©å™¨: ${selector}`;
            log(`å­—æ®µæ£€æµ‹ - ${fieldType}: æœªæ‰¾åˆ°`, "error");
          }

          container.appendChild(div);
        });

        // æ·»åŠ æ€»ç»“
        const summary = document.createElement("div");
        summary.className = `debug-item ${
          foundFields === totalFields ? "success" : "warning"
        }`;
        summary.innerHTML = `<strong>æ£€æµ‹æ€»ç»“:</strong> æ‰¾åˆ° ${foundFields}/${totalFields} ä¸ªå­—æ®µ`;
        container.appendChild(summary);

        log(
          `å­—æ®µæ£€æµ‹å®Œæˆ: ${foundFields}/${totalFields}`,
          foundFields === totalFields ? "success" : "warning"
        );
      }

      // æ¨¡æ‹Ÿæ•°æ®æµ‹è¯•
      function testWithMockData() {
        const container = document.getElementById("data-test");
        container.innerHTML = "";

        const mockData = {
          name: "å¼ ä¸‰",
          phone: "13800138000",
          email: "zhangsan@example.com",
          experience: "3-5",
          education: "æœ¬ç§‘",
          salary: "12k-18k",
          resume:
            "æˆ‘æ˜¯ä¸€åæœ‰ç»éªŒçš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œç†Ÿæ‚‰JavaScriptã€Pythonç­‰ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰3å¹´ä»¥ä¸Šçš„é¡¹ç›®å¼€å‘ç»éªŒã€‚",
        };

        const fieldMappings = {
          name: 'input[name="firstName"], input[id="firstName"], input[name="name"], input[id="name"]',
          phone: 'input[name="phone"], input[id="phone"], input[type="tel"]',
          email: 'input[name="email"], input[id="email"], input[type="email"]',
          experience: 'select[name="experience"], select[id="experience"]',
          education: 'select[name="education"], select[id="education"]',
          salary: 'select[name="salary"], select[id="salary"]',
          resume: 'textarea[name="introduction"], textarea[id="introduction"]',
        };

        let filledCount = 0;
        let totalCount = Object.keys(fieldMappings).length;

        Object.entries(fieldMappings).forEach(([fieldType, selector]) => {
          const element = document.querySelector(selector);
          const div = document.createElement("div");

          if (element && mockData[fieldType]) {
            try {
              // æ¨¡æ‹Ÿcontent.jsçš„å¡«å†™é€»è¾‘
              if (element.tagName.toLowerCase() === "select") {
                // å¤„ç†ä¸‹æ‹‰é€‰æ‹©
                const options = element.querySelectorAll("option");
                let matched = false;

                for (const option of options) {
                  if (
                    option.value === mockData[fieldType] ||
                    option.textContent.includes(mockData[fieldType])
                  ) {
                    element.value = option.value;
                    matched = true;
                    break;
                  }
                }

                if (!matched && options.length > 1) {
                  element.value = options[1].value;
                }
              } else {
                // å¤„ç†æ–‡æœ¬è¾“å…¥
                element.value = mockData[fieldType];
              }

              // è§¦å‘äº‹ä»¶
              element.dispatchEvent(new Event("input", { bubbles: true }));
              element.dispatchEvent(new Event("change", { bubbles: true }));

              filledCount++;
              div.className = "debug-item success";
              div.innerHTML = `<strong>${fieldType}:</strong> âœ… å¡«å†™æˆåŠŸ - "${mockData[fieldType]}"`;
              log(
                `å¡«å†™æµ‹è¯• - ${fieldType}: æˆåŠŸå¡«å†™ "${mockData[fieldType]}"`,
                "success"
              );

              // æ·»åŠ è§†è§‰åé¦ˆ
              element.style.backgroundColor = "#d4edda";
              setTimeout(() => {
                element.style.backgroundColor = "";
              }, 2000);
            } catch (error) {
              div.className = "debug-item error";
              div.innerHTML = `<strong>${fieldType}:</strong> âŒ å¡«å†™å¤±è´¥ - ${error.message}`;
              log(
                `å¡«å†™æµ‹è¯• - ${fieldType}: å¡«å†™å¤±è´¥ - ${error.message}`,
                "error"
              );
            }
          } else {
            div.className = "debug-item warning";
            div.innerHTML = `<strong>${fieldType}:</strong> âš ï¸ è·³è¿‡ - ${
              !element ? "å…ƒç´ æœªæ‰¾åˆ°" : "æ— æ•°æ®"
            }`;
            log(`å¡«å†™æµ‹è¯• - ${fieldType}: è·³è¿‡`, "warning");
          }

          container.appendChild(div);
        });

        // æ·»åŠ æ€»ç»“
        const summary = document.createElement("div");
        summary.className = `debug-item ${
          filledCount === totalCount ? "success" : "warning"
        }`;
        summary.innerHTML = `<strong>å¡«å†™æ€»ç»“:</strong> æˆåŠŸå¡«å†™ ${filledCount}/${totalCount} ä¸ªå­—æ®µ`;
        container.appendChild(summary);

        log(
          `å¡«å†™æµ‹è¯•å®Œæˆ: ${filledCount}/${totalCount}`,
          filledCount > 0 ? "success" : "error"
        );
      }

      function clearAllFields() {
        const inputs = document.querySelectorAll("input, select, textarea");
        inputs.forEach((input) => {
          if (input.type === "checkbox" || input.type === "radio") {
            input.checked = false;
          } else {
            input.value = "";
          }
          input.dispatchEvent(new Event("input", { bubbles: true }));
          input.dispatchEvent(new Event("change", { bubbles: true }));
        });
        log("å·²æ¸…ç©ºæ‰€æœ‰å­—æ®µ", "info");
      }

      // æ¶ˆæ¯é€šä¿¡æµ‹è¯•
      function testMessageCommunication() {
        log("å¼€å§‹æ¶ˆæ¯é€šä¿¡æµ‹è¯•");

        const container = document.getElementById("message-test");
        container.innerHTML = "";

        // é‡ç½®çŠ¶æ€
        let messageReceived = false;

        // å‘é€æ¡æ‰‹åè®®æ¶ˆæ¯ä»¥å»ºç«‹ä¸æ‰©å±•çš„è¿æ¥
        const handshakeMessage = {
          source: "JIANCAREER_WEBSITE",
          type: "SJ_DETECT_V1",
          timestamp: Date.now(),
          url: window.location.href,
          domain: window.location.hostname,
        };

        // ç›‘å¬æ¶ˆæ¯å“åº”
        const messageListener = (event) => {
          if (event.data.source === "JIANCAREER_EXTENSION") {
            messageReceived = true;
            const div = document.createElement("div");
            div.className = "debug-item success";
            div.innerHTML = `<strong>æ”¶åˆ°æ‰©å±•å“åº”:</strong> <pre>${JSON.stringify(
              event.data,
              null,
              2
            )}</pre>`;
            container.appendChild(div);
            log(`æ”¶åˆ°æ‰©å±•å“åº”: ${event.data.type}`, "success");
          }
        };

        window.addEventListener("message", messageListener);

        // é¦–å…ˆå‘é€æ¡æ‰‹åè®®æ¶ˆæ¯
        window.postMessage(handshakeMessage, "*");

        const handshakeDiv = document.createElement("div");
        handshakeDiv.className = "debug-item";
        handshakeDiv.innerHTML = `<strong>å‘é€æ¡æ‰‹åè®®:</strong> <pre>${JSON.stringify(
          handshakeMessage,
          null,
          2
        )}</pre>`;
        container.appendChild(handshakeDiv);
        log("å‘é€æ¡æ‰‹åè®®æ¶ˆæ¯: " + JSON.stringify(handshakeMessage));

        // å‘é€pingæ¶ˆæ¯
        setTimeout(() => {
          const pingMessage = {
            source: "JIANCAREER_WEBSITE",
            type: "JC_PING",
            timestamp: Date.now(),
          };

          window.postMessage(pingMessage, "*");

          const div = document.createElement("div");
          div.className = "debug-item";
          div.innerHTML = `<strong>å‘é€pingæ¶ˆæ¯:</strong> <pre>${JSON.stringify(
            pingMessage,
            null,
            2
          )}</pre>`;
          container.appendChild(div);
          log("å‘é€pingæ¶ˆæ¯: " + JSON.stringify(pingMessage));
        }, 500);

        // å‘é€æ£€æµ‹æ¶ˆæ¯
        setTimeout(() => {
          const detectMessage = {
            source: "JIANCAREER_WEBSITE",
            type: "JC_DETECT",
            timestamp: Date.now(),
          };

          window.postMessage(detectMessage, "*");

          const div = document.createElement("div");
          div.className = "debug-item";
          div.innerHTML = `<strong>å‘é€æ£€æµ‹æ¶ˆæ¯:</strong> <pre>${JSON.stringify(
            detectMessage,
            null,
            2
          )}</pre>`;
          container.appendChild(div);
          log("å‘é€æ£€æµ‹æ¶ˆæ¯: " + JSON.stringify(detectMessage));
        }, 1000);

        // å‘é€æµ‹è¯•æ¶ˆæ¯
        setTimeout(() => {
          const testMessage = {
            source: "JIANCAREER_WEBSITE",
            type: "TEST_MESSAGE",
            timestamp: Date.now(),
            data: "Hello from debug page",
          };

          window.postMessage(testMessage, "*");

          const div = document.createElement("div");
          div.className = "debug-item";
          div.innerHTML = `<strong>å‘é€æµ‹è¯•æ¶ˆæ¯:</strong> <pre>${JSON.stringify(
            testMessage,
            null,
            2
          )}</pre>`;
          container.appendChild(div);
          log("å‘é€æµ‹è¯•æ¶ˆæ¯: " + JSON.stringify(testMessage));
        }, 1500);

        // æ£€æŸ¥å“åº”
        setTimeout(() => {
          window.removeEventListener("message", messageListener);
          if (!messageReceived) {
            const errorDiv = document.createElement("div");
            errorDiv.className = "debug-item error";
            errorDiv.innerHTML =
              "<strong>âŒ æ¶ˆæ¯é€šä¿¡æµ‹è¯•å¤±è´¥ï¼šæœªæ”¶åˆ°å“åº”</strong> - å¯èƒ½åŸå› ï¼šæ‰©å±•æœªå®‰è£…æˆ–content scriptæœªæ³¨å…¥";
            container.appendChild(errorDiv);
            log("æ¶ˆæ¯é€šä¿¡æµ‹è¯•å¤±è´¥ï¼šæœªæ”¶åˆ°å“åº”", "error");
          } else {
            log("æ¶ˆæ¯é€šä¿¡æµ‹è¯•æˆåŠŸï¼", "success");
          }
        }, 3000);
      }

      // æµ‹è¯•æ‰©å±•ä¸€é”®å¡«å…¥åŠŸèƒ½
      function testExtensionAutofill() {
        const container = document.getElementById("extension-test");
        container.innerHTML = "";

        // æ¨¡æ‹Ÿç®€å†æ•°æ®
        const mockResumeData = {
          name: "å¼ ä¸‰",
          phone: "13800138000",
          email: "zhangsan@example.com",
          workExperience: "3-5å¹´",
          education: "æœ¬ç§‘",
          expectedSalary: "12k-18k",
          resumeText:
            "æˆ‘æ˜¯ä¸€åæœ‰ç»éªŒçš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œç†Ÿæ‚‰JavaScriptã€Pythonç­‰ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰3å¹´ä»¥ä¸Šçš„é¡¹ç›®å¼€å‘ç»éªŒã€‚æ“…é•¿å‰ç«¯å¼€å‘å’Œåç«¯APIè®¾è®¡ï¼Œæœ‰ä¸°å¯Œçš„é¡¹ç›®ç®¡ç†ç»éªŒã€‚",
        };

        // å‘é€æ¡æ‰‹åè®®
        const handshakeMessage = {
          source: "JIANCAREER_WEBSITE",
          type: "SJ_DETECT_V1",
          timestamp: Date.now(),
          url: window.location.href,
          domain: window.location.hostname,
        };

        window.postMessage(handshakeMessage, "*");

        const handshakeDiv = document.createElement("div");
        handshakeDiv.className = "debug-item";
        handshakeDiv.innerHTML = "<strong>æ­¥éª¤1:</strong> å‘é€æ¡æ‰‹åè®®æ¶ˆæ¯";
        container.appendChild(handshakeDiv);
        log("æ‰©å±•æµ‹è¯• - å‘é€æ¡æ‰‹åè®®", "info");

        // ç›‘å¬æ‰©å±•å“åº”
        const extensionListener = (event) => {
          if (event.data.source === "JIANCAREER_EXTENSION") {
            const responseDiv = document.createElement("div");
            responseDiv.className = "debug-item success";
            responseDiv.innerHTML = `<strong>æ­¥éª¤2:</strong> æ”¶åˆ°æ‰©å±•å“åº” - ${event.data.type}`;
            container.appendChild(responseDiv);
            log(`æ‰©å±•æµ‹è¯• - æ”¶åˆ°å“åº”: ${event.data.type}`, "success");

            // å¦‚æœæ”¶åˆ°ACKï¼Œæ¨¡æ‹Ÿpopupå‘é€è‡ªåŠ¨å¡«å†™æ¶ˆæ¯
            if (event.data.type === "SJ_ACK_V1") {
              setTimeout(() => {
                // æ¨¡æ‹ŸChromeæ‰©å±•æ¶ˆæ¯ï¼ˆè¿™åœ¨å®é™…ç¯å¢ƒä¸­ç”±popup.jså‘é€ï¼‰
                const autofillMessage = {
                  type: "JC_AUTOFILL",
                  profileData: mockResumeData,
                  timestamp: Date.now(),
                };

                // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬æ— æ³•ç›´æ¥å‘é€chrome.runtime.sendMessage
                // ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡window.postMessageæ¨¡æ‹Ÿ
                const simulateDiv = document.createElement("div");
                simulateDiv.className = "debug-item warning";
                simulateDiv.innerHTML =
                  "<strong>æ­¥éª¤3:</strong> æ¨¡æ‹Ÿå‘é€è‡ªåŠ¨å¡«å†™æ¶ˆæ¯ï¼ˆéœ€è¦çœŸå®æ‰©å±•ç¯å¢ƒï¼‰";
                container.appendChild(simulateDiv);
                log("æ‰©å±•æµ‹è¯• - æ¨¡æ‹Ÿè‡ªåŠ¨å¡«å†™æ¶ˆæ¯", "warning");

                // æç¤ºç”¨æˆ·ä½¿ç”¨çœŸå®æ‰©å±•
                const tipDiv = document.createElement("div");
                tipDiv.className = "debug-item";
                tipDiv.innerHTML =
                  '<strong>æç¤º:</strong> è¯·åœ¨å®‰è£…æ‰©å±•åï¼Œé€šè¿‡æ‰©å±•popupç‚¹å‡»"ä¸€é”®å¡«å…¥"æŒ‰é’®è¿›è¡ŒçœŸå®æµ‹è¯•';
                container.appendChild(tipDiv);
              }, 1000);
            }
          }
        };

        window.addEventListener("message", extensionListener);

        // 5ç§’åæ¸…ç†ç›‘å¬å™¨
        setTimeout(() => {
          window.removeEventListener("message", extensionListener);
          if (!container.querySelector(".success")) {
            const errorDiv = document.createElement("div");
            errorDiv.className = "debug-item error";
            errorDiv.innerHTML =
              "<strong>âŒ æ‰©å±•æµ‹è¯•å¤±è´¥</strong> - æœªæ”¶åˆ°æ‰©å±•å“åº”ï¼Œè¯·ç¡®è®¤æ‰©å±•å·²å®‰è£…å¹¶å¯ç”¨";
            container.appendChild(errorDiv);
            log("æ‰©å±•æµ‹è¯•å¤±è´¥: æœªæ”¶åˆ°å“åº”", "error");
          }
        }, 5000);
      }

      // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ‰§è¡Œæ£€æµ‹
      window.addEventListener("load", function () {
        log("è°ƒè¯•é¡µé¢åŠ è½½å®Œæˆ", "info");
        checkEnvironment();
        checkFields();
      });

      // ç›‘å¬æ¥è‡ªæ‰©å±•çš„æ¶ˆæ¯
      window.addEventListener("message", function (event) {
        if (event.data.source === "JIANCAREER_EXTENSION") {
          log(`æ”¶åˆ°æ‰©å±•æ¶ˆæ¯: ${event.data.type}`, "info");
          console.log("æ‰©å±•æ¶ˆæ¯:", event.data);
        }
      });
    </script>
  </body>
</html>
