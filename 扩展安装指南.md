# AutoFill Pro 扩展安装与测试指南

## 📦 扩展安装步骤

### 1. 打开 Chrome 扩展管理页面
- 在 Chrome 浏览器地址栏输入：`chrome://extensions/`
- 或者点击右上角三点菜单 → 更多工具 → 扩展程序

### 2. 启用开发者模式
- 在扩展管理页面右上角，打开"开发者模式"开关

### 3. 加载扩展
- 点击"加载已解压的扩展程序"按钮
- 选择扩展目录：`C:\Users\willi\Desktop\2025\塔塔\Simplify\dist`
- 点击"选择文件夹"

### 4. 验证安装
- 扩展列表中应该出现"AutoFill Pro - 智能自动填表助手"
- 确保扩展状态为"已启用"

## 🧪 功能测试步骤

### 测试页面
1. 打开测试页面：`http://localhost:8080/extension-test.html`
2. 或者打开：`http://localhost:8080/test.html`

### 预期功能

#### ✅ 字段映射热改功能
- 控制台应显示：`[FormFieldMappings] 字段映射文件已加载，支持热改功能`
- 控制台应显示：`✅ SJ Field Mappings loaded successfully!`
- 测试字段应该被正确识别

#### ✅ 浮窗显示
- 页面右下角应出现 AutoFill Pro 浮窗
- 浮窗包含以下按钮：
  - 🔍 检测表单
  - ✨ 一键填写
  - ❌ 关闭

#### ✅ 表单检测
- 点击"检测表单"按钮
- 浮窗应显示检测到的表单数量
- 状态指示灯应变为绿色

#### ✅ 一键填写
- 点击"一键填写"按钮
- 表单字段应自动填充（如果有用户档案数据）

## 🔧 故障排除

### 扩展未加载
- 检查 `dist` 目录是否包含所有必要文件：
  - `manifest.json`
  - `formFieldMappings.js`
  - `content.js`
  - `background.js`
  - `popup.html`

### 浮窗未显示
- 刷新页面
- 检查控制台是否有错误信息
- 确认扩展权限已正确授予

### 字段映射未生效
- 检查 `formFieldMappings.js` 文件是否在 `content.js` 之前加载
- 查看控制台日志确认映射文件已加载

### 控制台错误
- 打开开发者工具（F12）
- 查看 Console 标签页的错误信息
- 检查 Network 标签页是否有加载失败的资源

## 📋 测试清单

- [ ] 扩展成功安装并启用
- [ ] 字段映射文件正确加载
- [ ] 浮窗在页面上正确显示
- [ ] 表单检测功能正常工作
- [ ] 一键填写功能正常工作
- [ ] 握手协议消息传递正常
- [ ] 统一键位数据存储正常
- [ ] 投递记录功能正常
- [ ] 中文字段映射正确识别
- [ ] 热改功能验证成功

## 🎯 核心功能验证

### 1. 热改功能测试
```javascript
// 在控制台执行，验证映射可以动态修改
window.__SJ_FIELD_MAPPINGS__.newTestField = [
  { name: 'newTest' },
  { placeholder: /新测试字段/i }
];
console.log('新字段已添加:', window.__SJ_FIELD_MAPPINGS__.newTestField);
```

### 2. 握手协议测试
```javascript
// 在控制台执行，测试消息传递
chrome.runtime.sendMessage({type: 'GET_SJ_PROFILE'}, (response) => {
  console.log('握手协议响应:', response);
});
```

### 3. 统一键位测试
```javascript
// 在控制台执行，测试存储
chrome.storage.local.get(['sj_profile', 'sj_applications'], (result) => {
  console.log('统一键位数据:', result);
});
```

---

**注意**：如果遇到问题，请检查 Chrome 控制台的错误信息，并确保所有文